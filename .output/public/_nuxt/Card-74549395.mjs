import V from"./Breadcrumb-f0a493e1.mjs";import B from"./Return-e7151eca.mjs";import R from"./H3-d94b3637.mjs";import N from"./Icon-99a710f8.mjs";import T from"./Button-f9a60a36.mjs";import L from"./Product-61f11ef5.mjs";import W from"./Review-46eeb9fa.mjs";import q from"./Video-b369d373.mjs";import E from"./Case-4978c6ed.mjs";import{u as p,f as H,q as z,x as G,y as O,S as I,_ as J,o,c as i,a,w as u,b as e,F as l,m as d,e as h,t as r,n as g,g as n,k as w,G as K}from"./entry-f900561f.mjs";import{T as Q}from"./thumbs-dbbdb6d5.mjs";import"./Share-9e009dfc.mjs";import"./Incdec-daa623aa.mjs";import"./Plus-3e645920.mjs";var X={name:"Card",setup(){let s=p("products"),c=p("compares"),m=p("favorits"),f=p("isShowAlert"),F=p("alertValue"),P=p("isShowModal"),y=p("isCallbackFormShow"),C=p("isReviewFormShow"),k=p("isNotAvailableFormShow"),v=p("cartCount");return{products:s,compares:c,favorits:m,isShowAlert:f,alertValue:F,isShowModal:P,isCallbackFormShow:y,isReviewFormShow:C,isNotAvailableFormShow:k,cartCount:v}},data(){return{isFavorit:!1,isComp:!1,isAdded:!1,UID:0,title:"",price:{},count:1,total:1,counts:[{key:"\u0412 \u043D\u0430\u043B\u0438\u0447\u0438\u0438",value:15},{key:"\u041D\u0430 \u0441\u043A\u043B\u0430\u0434\u0435",value:10}],text:"",complect:"",video:"",images:[],sets:[],chars:[],tabs:{current:null,list:[{title:"\u0425\u0430\u0440\u0430\u043A\u0442\u0435\u0440\u0438\u0441\u0442\u0438\u043A\u0438"},{title:"\u0410\u043D\u0430\u043B\u043E\u0433\u0438"},{title:"\u041E\u0442\u0437\u044B\u0432\u044B"}]},elements:[],reviews:[],analogs:[],rec:[],selects:{step:0,current:{},marks:[]}}},methods:{toLink:H,toPriceFormat:z,addProduct:G,removeProduct:O,setCurrentMark(s){this.selects.current.mark=s,this.selects.step++},setCurrentModel(s){this.selects.current.model=s,this.selects.step++},goBack(){this.selects.step--},getModelWord(s=0){let c="";return s==0?(c="\u0414\u043B\u044F \u0432\u0441\u0435\u0445 \u043C\u043E\u0434\u0435\u043B\u0435\u0439",c):(s==1?c="\u043C\u043E\u0434\u0435\u043B\u044C":s>=2&&s<=4?c="\u043C\u043E\u0434\u0435\u043B\u0438":c="\u043C\u043E\u0434\u0435\u043B\u0435\u0439",s+" "+c)},toggleFavorit(){this.isFavorit=!this.isFavorit,this.isShowAlert=!0,this.isFavorit?(this.alertValue='\u0422\u043E\u0432\u0430\u0440 "'+this.title+'" \u0443\u0441\u043F\u0435\u0448\u043D\u043E \u0434\u043E\u0431\u0430\u0432\u043B\u0435\u043D \u0432 \u0438\u0437\u0431\u0440\u0430\u043D\u043D\u043E\u0435',this.addProduct(this.product,"favorits")):(this.alertValue='\u0422\u043E\u0432\u0430\u0440 "'+this.title+'" \u0443\u0434\u0430\u043B\u0451\u043D \u0438\u0437 \u0438\u0437\u0431\u0440\u0430\u043D\u043D\u043E\u0433\u043E',this.removeProduct(this.product,"favorits"))},toggleComp(){this.isComp=!this.isComp,this.isShowAlert=!0,this.isComp?(this.alertValue='\u0422\u043E\u0432\u0430\u0440 "'+this.title+'" \u0443\u0441\u043F\u0435\u0448\u043D\u043E \u0434\u043E\u0431\u0430\u0432\u043B\u0435\u043D \u0432 \u0441\u0440\u0430\u0432\u043D\u0435\u043D\u0438\u0435',this.addProduct(this.product,"compares")):(this.alertValue='\u0422\u043E\u0432\u0430\u0440 "'+this.title+'" \u0443\u0434\u0430\u043B\u0451\u043D \u0438\u0437 \u0441\u0440\u0430\u0432\u043D\u0435\u043D\u0438\u044F',this.removeProduct(this.product,"compares"))},toggleProduct(s){if(document.querySelector(".card__button-add .icon_phone")&&s.target.closest(".button__icon"))return this.isShowModal=this.isCallbackFormShow=!0,!1;this.isAdded=!0,this.isShowAlert=!0,this.isAdded&&(this.alertValue='\u0422\u043E\u0432\u0430\u0440 "'+this.title+'" \u0443\u0441\u043F\u0435\u0448\u043D\u043E \u0434\u043E\u0431\u0430\u0432\u043B\u0435\u043D \u0432 \u043A\u043E\u0440\u0437\u0438\u043D\u0443',this.addProduct(this.product)),this.changeCartCount()},notAvailable(s){document.querySelector(".card__button-add .icon_bookmark")&&s.target.closest(".button__icon")?this.toggleFavorit():this.isShowModal=this.isNotAvailableFormShow=!0},async getProduct(s){return s=s?"?"+s:"",await(await(await fetch("/data/products.json"+s)).json()).find(f=>f.UID==this.UID)},async getProducts(s){return s=s?"?"+s:"",await(await fetch("/data/products.json"+s)).json()},async getProducts(s){return s=s?"?"+s:"",await(await fetch("/data/products.json"+s)).json()},async getReviews(s){return s=s?"?"+s:"",await(await fetch("/data/reviews.json"+s)).json()},async getSelects(s){return s=s?"?"+s:"",await(await fetch("/data/autos.json"+s)).json()},changeCartCount(){let s=0;for(const c of this.products)s+=c.count?c.count:1;this.cartCount=s<10?s:"9+"}},async mounted(){this.UID=this.$router.currentRoute.value.params.id,this.dataProduct=await this.getProduct("id="+this.UID),Object.entries(this.dataProduct).forEach(m=>{this[m[0]]=m[1]}),this.total=this.countTotal.now+this.countTotal.stock,this.reviews=await this.getReviews("id="+this.UID),this.selects.marks=await this.getSelects("id="+this.UID),this.product={UID:this.UID,title:this.title,desc:this.desc,count:this.count,sets:this.sets,images:this.images,price:this.price,chars:this.chars?this.chars:null},this.tabs.current=this.tabs.list[0],this.elements=await this.getProducts(),this.analogs=this.elements.splice(0,3),this.rec=this.elements.splice(0,2);let s=this.products.find(m=>m.UID==this.UID);s&&(this.isAdded=!0,s.sets&&(this.sets=s.sets)),s=this.compares.find(m=>m.UID==this.UID),s&&(this.isComp=!0),s=this.favorits.find(m=>m.UID==this.UID),s&&(this.isFavorit=!0);let c=new I(this.$refs.pagination,{slidesPerView:"auto",spaceBetween:10});new I(this.$refs.images,{thumbs:{swiper:c},modules:[Q]})}};const Y={class:"card"},Z={class:"card__inner row"},x={class:"card__data"},ss={class:"card__gallery"},ts={class:"card__images swiper",ref:"images"},es={class:"card__images-list swiper-wrapper"},os=["src"],is={class:"card__pagination swiper",ref:"pagination"},cs={class:"card__pagination-list swiper-wrapper"},as=["src"],rs=e("div",{class:"card__pagination-logo"},[e("img",{src:K,alt:""})],-1),ns={class:"card__controls row"},ls={class:"card__price"},ds=h("\u0426\u0435\u043D\u0430: "),_s=h(),us=e("span",{class:"r"},null,-1),hs={class:"card__actions row"},ms={key:0,class:"card__counts"},vs={class:"card__count-key"},ps={class:"card__count-value"},ks=h("\u0421\u043E\u043E\u0431\u0449\u0438\u0442\u044C \u043E \u043F\u043E\u0441\u0442\u0443\u043F\u043B\u0435\u043D\u0438\u0438"),gs=h("\u041F\u0435\u0440\u0435\u0439\u0442\u0438 \u0432 \u043A\u043E\u0440\u0437\u0438\u043D\u0443"),ws=h("\u0414\u043E\u0431\u0430\u0432\u0438\u0442\u044C \u0432 \u043A\u043E\u0440\u0437\u0438\u043D\u0443"),fs={key:4,class:"card__sets"},bs=e("div",{class:"card__sets-title"},"\u041C\u0430\u043A\u0441\u0438\u043C\u0430\u043B\u044C\u043D\u043E\u0435 \u0437\u0430\u043D\u0438\u0436\u0435\u043D\u0438\u0435",-1),ys={class:"card__sets-list"},Cs=["onClick"],Ss={class:"card__selection hidden-xs"},Fs=h("\u041F\u043E\u0434\u0445\u043E\u0434\u0438\u0442 \u0434\u043B\u044F"),Ps={key:0,class:"card__selection-list"},Ms=["onClick"],$s={class:"card__selection-mark"},Ds=["src","alt"],Is={class:"card__selection-name"},As={class:"card__selection-count"},Us={key:0,class:"card__selection-plus"},js={key:1,class:"card__selection-sub"},Vs=["onClick"],Bs={class:"card__selection-mark"},Rs=["src","alt"],Ns={class:"card__selection-name"},Ts={class:"card__selection-count"},Ls={class:"card__selection-icon"},Ws={key:2,class:"card__selection-sub"},qs={class:"card__selection-mark"},Es=["src","alt"],Hs={class:"card__selection-name"},zs=e("div",{class:"card__selection-count"},"\u041D\u0430\u0437\u0430\u0434",-1),Gs={class:"card__selection-icon card__selection-icon_reverse"},Os=e("span",null,null,-1),Js={class:"card__content"},Ks=h("\u041E\u043F\u0438\u0441\u0430\u043D\u0438\u0435"),Qs={class:"card__text"},Xs={class:"card__tabs"},Ys={class:"card__tabs-links"},Zs=["onClick","data-text"],xs={class:"card__tabs-list"},st={key:0,class:"card__tabs-item"},tt={key:0,class:"card__block"},et=e("h3",null,"\u0425\u0430\u0440\u0430\u043A\u0442\u0435\u0440\u0438\u0441\u0442\u0438\u043A\u0438",-1),ot={class:"card__block card__block_button",href:"",target:"_blank"},it=e("span",null,"\u0418\u043D\u0441\u0442\u0440\u0443\u043A\u0446\u0438\u044F",-1),ct={key:1,class:"card__block"},at=e("h3",null,"\u041A\u043E\u043C\u043F\u043B\u0435\u043A\u0442\u0430\u0446\u0438\u044F",-1),rt=["innerHTML"],nt={key:1,class:"card__tabs-item"},lt={class:"card__analogs"},dt={key:2,class:"card__tabs-item"},_t={class:"card__reviews"},ut=h("\u041E\u0441\u0442\u0430\u0432\u0438\u0442\u044C \u043E\u0442\u0437\u044B\u0432"),ht={class:"card__video"},mt=h("\u0412\u0438\u0434\u0435\u043E \u043E\u0431\u0437\u043E\u0440"),vt={class:"card__rec hidden show-xs"},pt=h("\u0420\u0435\u043A\u043E\u043C\u0435\u043D\u0434\u0443\u0435\u043C \u043A \u0443\u0441\u0442\u0430\u043D\u043E\u0432\u043A\u0435"),kt={class:"card__rec-list"},gt={class:"card__selection hidden show-xs"},wt=h("\u041F\u043E\u0434\u0445\u043E\u0434\u0438\u0442 \u0434\u043B\u044F"),ft={key:0,class:"card__selection-list"},bt=["onClick"],yt={class:"card__selection-mark"},Ct=["src","alt"],St={class:"card__selection-name"},Ft={class:"card__selection-count"},Pt={key:0,class:"card__selection-plus"},Mt={key:1,class:"card__selection-sub"},$t=["onClick"],Dt={class:"card__selection-mark"},It=["src","alt"],At={class:"card__selection-name"},Ut={class:"card__selection-count"},jt={class:"card__selection-icon"},Vt={key:2,class:"card__selection-sub"},Bt={class:"card__selection-mark"},Rt=["src","alt"],Nt={class:"card__selection-name"},Tt=e("div",{class:"card__selection-count"},"\u041D\u0430\u0437\u0430\u0434",-1),Lt={class:"card__selection-icon card__selection-icon_reverse"},Wt=e("span",null,null,-1);function qt(s,c,m,f,F,P){const y=V,C=B,k=R,v=N,b=T,M=L,A=W,U=q,j=E;return o(),i("div",Y,[a(j,{class:"case_sm"},{default:u(()=>{var $,D;return[a(y,{class:"card__breadcrumb"}),a(C,{class:"card__return hidden"}),e("div",Z,[e("div",x,[e("div",ss,[e("div",ts,[e("div",es,[(o(!0),i(l,null,d(s.images,t=>(o(),i("div",{class:"card__images-item swiper-slide",key:t},[e("img",{src:t,alt:""},null,8,os)]))),128))])],512),e("div",is,[e("div",cs,[(o(!0),i(l,null,d(s.images,t=>(o(),i("div",{class:"card__pagination-item swiper-slide",key:t},[e("img",{src:t,alt:""},null,8,as)]))),128))]),rs],512)]),a(k,{class:"card__title card__name"},{default:u(()=>[h(r(s.title),1)]),_:1}),e("div",ns,[e("div",ls,[ds,e("var",null,r(s.toPriceFormat(s.price.current)),1),_s,us]),e("div",hs,[e("div",{class:g(["card__action",s.isFavorit?"card__action_selected":null]),onClick:c[0]||(c[0]=(...t)=>s.toggleFavorit&&s.toggleFavorit(...t))},[a(v,{name:"bookmark"})],2),e("div",{class:g(["card__action",s.isComp?"card__action_selected":null]),onClick:c[1]||(c[1]=(...t)=>s.toggleComp&&s.toggleComp(...t))},[a(v,{name:"scale"})],2)])]),s.total>1?(o(),i("div",ms,[(o(!0),i(l,null,d(s.counts,t=>(o(),i("div",{class:"card__count",key:t.id},[e("div",vs,r(t.key)+":",1),e("div",ps,r(t.value)+" \u0448\u0442.",1)]))),128))])):n("",!0),s.total<1?(o(),w(b,{key:1,class:"card__button-add",mods:"md, bg-red, shadow-black",onClick:s.notAvailable},{default:u(()=>[ks]),iconLeft:u(()=>[a(v,{name:"bookmark",class:g(s.isFavorit?"f-red":"f-gray")},null,8,["class"])]),_:1},8,["onClick"])):s.isAdded?(o(),w(b,{key:2,class:"card__button-add",mods:"md, bg-red, shadow-black",href:"/basket"},{default:u(()=>[gs]),_:1})):(o(),w(b,{key:3,class:"card__button-add",mods:"md, bg-red, shadow-black",onClick:s.toggleProduct},{default:u(()=>[ws]),iconLeft:u(()=>[a(v,{name:"phone"})]),_:1},8,["onClick"])),(($=s.sets)==null?void 0:$.length)>0?(o(),i("div",fs,[bs,e("div",ys,[(o(!0),i(l,null,d(s.sets,t=>(o(),i("div",{key:t.title,class:g(["card__sets-item",t.checked?"card__sets-item_checked":null]),onClick:_=>t.checked=!t.checked},r(t.title),11,Cs))),128))])])):n("",!0),e("div",Ss,[a(k,{class:"card__selection-title"},{default:u(()=>[Fs]),_:1}),s.selects.step==0?(o(),i("div",Ps,[(o(!0),i(l,null,d(s.selects.marks,t=>{var _;return o(),i("div",{key:t.id,class:g(["card__selection-item",t.models?null:"card__selection-item_disabled"]),onClick:S=>s.setCurrentMark(t)},[e("div",$s,[e("img",{src:t.icon,alt:t.name},null,8,Ds)]),e("div",Is,r(t.name),1),e("div",As,r(s.getModelWord((_=t.models)==null?void 0:_.length)),1),t.models?(o(),i("div",Us)):n("",!0)],10,Ms)}),128))])):n("",!0),s.selects.step==1&&s.selects.current.mark?(o(),i("div",js,[(o(!0),i(l,null,d(s.selects.current.mark.models,t=>{var _;return o(),i("div",{key:t.id,class:"card__selection-item",onClick:S=>s.setCurrentModel(t)},[e("div",Bs,[e("img",{src:s.selects.current.mark.icon,alt:s.selects.current.mark.name},null,8,Rs)]),e("div",Ns,r(t.name),1),e("div",Ts,r(s.getModelWord((_=t.mods)==null?void 0:_.length)),1),e("div",Ls,[a(v,{name:"arrow"})])],8,Vs)}),128))])):n("",!0),s.selects.step==2&&s.selects.current.model?(o(),i("div",Ws,[(o(!0),i(l,null,d(s.selects.current.model.mods,t=>(o(),i("div",{key:t.id,class:"card__selection-item card__selection-item_disabled"},[e("div",qs,[e("img",{src:s.selects.current.mark.icon,alt:s.selects.current.mark.name},null,8,Es)]),e("div",Hs,r(t.name),1)]))),128))])):n("",!0),s.selects.step>0?(o(),i("div",{key:3,class:"card__selection-item card__selection-return",onClick:c[2]||(c[2]=(...t)=>s.goBack&&s.goBack(...t))},[zs,e("div",Gs,[a(v,{name:"arrow"})]),Os])):n("",!0)])]),e("div",Js,[a(k,{class:"card__title"},{default:u(()=>[Ks]),_:1}),e("div",Qs,r(s.text),1),e("div",Xs,[e("div",Ys,[(o(!0),i(l,null,d(s.tabs.list,t=>(o(),i("div",{class:g(["card__tabs-link",t==s.tabs.current?"card__tabs-link_current":null]),key:t.id,onClick:_=>s.tabs.current=t,"data-text":t.title},r(t.title),11,Zs))),128))]),e("div",xs,[s.tabs.current==s.tabs.list[0]?(o(),i("div",st,[((D=s.chars)==null?void 0:D.length)>0?(o(),i("div",tt,[et,e("ul",null,[(o(!0),i(l,null,d(s.chars,t=>(o(),i("li",{key:t.id},[h(r(t.title)+": ",1),e("b",null,r(t.value),1)]))),128))])])):n("",!0),e("a",ot,[a(v,{name:"doc",class:"f-red"}),it]),s.complect?(o(),i("div",ct,[at,e("p",{innerHTML:s.complect},null,8,rt)])):n("",!0)])):n("",!0),s.tabs.current==s.tabs.list[1]?(o(),i("div",nt,[e("div",lt,[(o(!0),i(l,null,d(s.analogs,t=>(o(),w(M,{key:t.title,element:t,class:"product_row card__analog"},null,8,["element"]))),128))])])):n("",!0),s.tabs.current==s.tabs.list[2]?(o(),i("div",dt,[e("div",_t,[(o(!0),i(l,null,d(s.reviews,t=>(o(),w(A,{key:t.id,class:"card__review",img:t.img,title:t.title,text:t.text},null,8,["img","title","text"]))),128))]),a(b,{class:"card__button-review",mods:"md, bg-white, c-red, shadow-black",modal:!0,onClick:c[3]||(c[3]=t=>s.isReviewFormShow=!0)},{default:u(()=>[ut]),_:1})])):n("",!0)])]),e("div",ht,[a(k,{class:"card__video-title"},{default:u(()=>[mt]),_:1}),a(U,{class:"card__video-wrap",poster:"/assets/images/video-poster.jpg",video:s.video},null,8,["video"])]),e("div",vt,[a(k,{class:"card__rec-title"},{default:u(()=>[pt]),_:1}),e("div",kt,[(o(!0),i(l,null,d(s.rec,t=>(o(),w(M,{key:t.title,element:t,class:"product_col card__rec-item"},null,8,["element"]))),128))])]),e("div",gt,[a(k,{class:"card__selection-title"},{default:u(()=>[wt]),_:1}),s.selects.step==0?(o(),i("div",ft,[(o(!0),i(l,null,d(s.selects.marks,t=>{var _;return o(),i("div",{key:t.id,class:g(["card__selection-item",t.models?null:"card__selection-item_disabled"]),onClick:S=>s.setCurrentMark(t)},[e("div",yt,[e("img",{src:t.icon,alt:t.name},null,8,Ct)]),e("div",St,r(t.name),1),e("div",Ft,r(s.getModelWord((_=t.models)==null?void 0:_.length)),1),t.models?(o(),i("div",Pt)):n("",!0)],10,bt)}),128))])):n("",!0),s.selects.step==1&&s.selects.current.mark?(o(),i("div",Mt,[(o(!0),i(l,null,d(s.selects.current.mark.models,t=>{var _;return o(),i("div",{key:t.id,class:"card__selection-item",onClick:S=>s.setCurrentModel(t)},[e("div",Dt,[e("img",{src:s.selects.current.mark.icon,alt:s.selects.current.mark.name},null,8,It)]),e("div",At,r(t.name),1),e("div",Ut,r(s.getModelWord((_=t.mods)==null?void 0:_.length)),1),e("div",jt,[a(v,{name:"arrow"})])],8,$t)}),128))])):n("",!0),s.selects.step==2&&s.selects.current.model?(o(),i("div",Vt,[(o(!0),i(l,null,d(s.selects.current.model.mods,t=>(o(),i("div",{key:t.id,class:"card__selection-item card__selection-item_disabled"},[e("div",Bt,[e("img",{src:s.selects.current.mark.icon,alt:s.selects.current.mark.name},null,8,Rt)]),e("div",Nt,r(t.name),1)]))),128))])):n("",!0),s.selects.step>0?(o(),i("div",{key:3,class:"card__selection-item card__selection-return",onClick:c[4]||(c[4]=(...t)=>s.goBack&&s.goBack(...t))},[Tt,e("div",Lt,[a(v,{name:"arrow"})]),Wt])):n("",!0)])])])]}),_:1})])}var ee=J(X,[["render",qt]]);export{ee as default};
