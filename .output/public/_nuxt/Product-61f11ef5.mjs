import P from"./Icon-99a710f8.mjs";import U from"./Incdec-daa623aa.mjs";import D from"./Plus-3e645920.mjs";import F from"./Button-f9a60a36.mjs";import{u as c,f as I,q as B,s as A,x as V,y as M,z as E,_ as $,o as i,c as r,b as o,t as l,g as d,e as u,n as h,a as m,k as _,F as S,m as b,i as q,l as L,w as C,h as N}from"./entry-f900561f.mjs";var T={name:"Product",setup(){let t=c("products"),e=c("compares"),a=c("favorits"),p=c("isShowAlert"),v=c("alertValue"),k=c("cartCount"),n=c("isShowModal"),f=c("isSetsShow");return{products:t,compares:e,favorits:a,isShowAlert:p,isShowModal:n,isSetsShow:f,alertValue:v,cartCount:k}},data(){return{UID:0,img:"",title:"",desc:"",price:{},chars:[],sets:[],isFavorit:!1,isComp:!1,isAdded:!1,isShowModal:!1,isSetsError:!1,count:1,dir:"/catalog/",product:null}},methods:{toLink:I,toPriceFormat:B,findProduct:A,addProduct:V,removeProduct:M,setStorage:E,toggleFavorit(){this.isFavorit=!this.isFavorit,this.isShowAlert=!0,this.isFavorit?(this.alertValue='\u0422\u043E\u0432\u0430\u0440 "'+this.title+'" \u0443\u0441\u043F\u0435\u0448\u043D\u043E \u0434\u043E\u0431\u0430\u0432\u043B\u0435\u043D \u0432 \u0438\u0437\u0431\u0440\u0430\u043D\u043D\u043E\u0435',this.addProduct(this.product,"favorits")):(this.alertValue='\u0422\u043E\u0432\u0430\u0440 "'+this.title+'" \u0443\u0434\u0430\u043B\u0451\u043D \u0438\u0437 \u0438\u0437\u0431\u0440\u0430\u043D\u043D\u043E\u0433\u043E',this.removeProduct(this.product,"favorits"))},toggleComp(){this.isComp=!this.isComp,this.isShowAlert=!0,this.isComp?(this.alertValue='\u0422\u043E\u0432\u0430\u0440 "'+this.title+'" \u0443\u0441\u043F\u0435\u0448\u043D\u043E \u0434\u043E\u0431\u0430\u0432\u043B\u0435\u043D \u0432 \u0441\u0440\u0430\u0432\u043D\u0435\u043D\u0438\u0435',this.addProduct(this.product,"compares")):(this.alertValue='\u0422\u043E\u0432\u0430\u0440 "'+this.title+'" \u0443\u0434\u0430\u043B\u0451\u043D \u0438\u0437 \u0441\u0440\u0430\u0432\u043D\u0435\u043D\u0438\u044F',this.removeProduct(this.product,"compares"))},toggleProduct(t){var e;if(this.sets&&!this.isAdded){if(!t.target.closest(".product__sets-button")){document.setsBlock=this.$refs.product.querySelector(".product__modal "),this.isShowModal=this.isSetsShow=!0;let a=document.querySelector(".modal .form__sets"),p=document.setsBlock.querySelector(".product__modal-inner");return setTimeout(()=>{a.append(p)},100),!1}if(!this.sets.find(a=>a.checked==!0))return this.isSetsError=!0,setTimeout(()=>{this.isSetsError=!1},3e3),!1}this.isAdded=!this.isAdded,this.isShowAlert=!0,this.isAdded?(this.alertValue='\u0422\u043E\u0432\u0430\u0440 "'+this.title+'" \u0443\u0441\u043F\u0435\u0448\u043D\u043E \u0434\u043E\u0431\u0430\u0432\u043B\u0435\u043D \u0432 \u043A\u043E\u0440\u0437\u0438\u043D\u0443',this.addProduct(this.product)):(this.alertValue='\u0422\u043E\u0432\u0430\u0440 "'+this.title+'" \u0443\u0434\u0430\u043B\u0451\u043D \u0438\u0437 \u043A\u043E\u0440\u0437\u0438\u043D\u044B',this.removeProduct(this.product),((e=this.sets)==null?void 0:e.length)>0&&this.sets.forEach(a=>{a.checked=!1})),this.changeCartCount()},handleClick(t){this.change(),t.target.closest(".nk")||this.toLink(this.href)},change(){for(let t=0;t<this.products.length;t++){let e=this.products[t];e.UID==this.UID&&(e.count=this.count)}this.setStorage("products",this.products),this.changeCartCount()},changeCartCount(){let t=0;for(const e of this.products)t+=e.count?e.count:1;this.cartCount=t<10?t:"9+"}},computed:{href(){return this.dir+this.UID}},created(){if(!this.element)return!1;this.UID=this.element.UID,this.img=this.element.images[0],this.title=this.element.title,this.desc=this.element.desc,this.price=this.element.price,this.chars=this.element.chars,this.sets=this.element.sets?Object.assign(this.element.sets):null,this.product={UID:this.element.UID,title:this.element.title,desc:this.element.desc,count:this.count,sets:this.sets,images:this.element.images,price:this.element.price,chars:this.element.chars?this.element.chars:null,sets:this.element.sets?Object.assign(this.element.sets):null}},mounted(){let t=this.products.find(e=>e.UID==this.product.UID);if(t&&(this.isAdded=!0,this.count=t.count),t=this.compares.find(e=>e.UID==this.product.UID),t&&(this.isComp=!0),t=this.favorits.find(e=>e.UID==this.product.UID),t&&(this.isFavorit=!0),this.incdec){let e=document.setsBlock=this.$refs.product.querySelector(".incdec__input");setTimeout(()=>{e.value=this.count,console.log(e.value)},200)}},watch:{isShowModal(){this.isShowModal?document.body.classList.add("body-modal-is-show"):document.body.classList.remove("body-modal-is-show")}},props:{element:Object,incdec:Boolean,remove:Boolean,disabled:Boolean,hide_old_price:Boolean,compare:Boolean,favorit:Boolean,chars_show:Boolean,index:Number}};const j=["href"],O={class:"product__inner"},z={class:"product__img img"},G=["src","alt"],H={class:"product__content"},J={key:0,class:"product__title"},K={key:1,class:"product__desc"},Q={class:"product__data"},R={key:0,class:"product__price"},W={class:"product__price-current"},X=o("span",{class:"r"},null,-1),Y={key:0,class:"product__price-old"},Z=o("span",{class:"r"},null,-1),x={key:1,class:"product__price"},tt=o("span",{class:"r"},null,-1),et={key:0,class:"product__price-total"},st=o("span",{class:"text-itog"},"\u0418\u0442\u043E\u0433:",-1),ot=o("span",{class:"r"},null,-1),it={key:0,class:"product__chars"},rt=o("div",{class:"product__chars-title"},"\u041E\u0441\u043D\u043E\u0432\u043D\u044B\u0435 \u0445\u0430\u0440\u0430\u043A\u0442\u0435\u0440\u0438\u0441\u0442\u0438\u043A\u0438",-1),dt={class:"product__chars-list"},lt={class:"product__chars-key"},at={class:"product__chars-value"},ct={key:1,class:"product__modal nk"},nt={class:"product__modal-inner",ref:"sets"},ut={class:"product__sets"},ht=o("div",{class:"product__sets-title"},"\u041C\u0430\u043A\u0441\u0438\u043C\u0430\u043B\u044C\u043D\u043E\u0435 \u0437\u0430\u043D\u0438\u0436\u0435\u043D\u0438\u0435",-1),pt={class:"product__sets-list row"},mt={class:"product__sets-error"},_t=u("\u0414\u043E\u0431\u0430\u0432\u0438\u0442\u044C \u0432 \u043A\u043E\u0440\u0437\u0438\u043D\u0443"),ft=u("\u041F\u0435\u0440\u0435\u0439\u0442\u0438 \u0432 \u043A\u043E\u0440\u0437\u0438\u043D\u0443");function vt(t,e,a,p,v,k){const n=P,f=U,w=D,g=F;return i(),r("a",{class:h(["product",[t.remove?"product_has-remove":null,t.disabled?"product_disabled":null]]),href:t.href,onClick:e[6]||(e[6]=N((...s)=>t.handleClick&&t.handleClick(...s),["prevent"])),ref:"product"},[o("div",O,[o("div",z,[o("img",{src:t.img,alt:t.title},null,8,G)]),o("div",H,[t.title?(i(),r("div",J,l(t.title),1)):d("",!0),t.desc?(i(),r("div",K,l(t.desc),1)):d("",!0),o("div",Q,[t.incdec?(i(),r("div",x,[o("div",{class:h(["product__price-current",t.count>1?"product__price-current_xs":null])},[u(l(t.count>1?"\u0417\u0430 ":null)+"\u0448\u0442. "+l(t.toPriceFormat(t.price.current))+" ",1),tt],2),t.count>1?(i(),r("div",et,[st,u(" "+l(t.toPriceFormat(t.price.current*t.count))+" ",1),ot])):d("",!0)])):(i(),r("div",R,[o("div",W,[u(l(t.toPriceFormat(t.price.current))+" ",1),X]),t.price.old&&!t.hide_old_price?(i(),r("div",Y,[u(l(t.toPriceFormat(t.price.old))+" ",1),Z])):d("",!0)])),!t.disabled&&t.remove?(i(),r("div",{key:2,class:"product__button-remove nk",onClick:e[0]||(e[0]=(...s)=>t.toggleProduct&&t.toggleProduct(...s))},[m(n,{name:"trash"})])):d("",!0),t.favorit&&!t.disabled?(i(),r("div",{key:3,class:h(["product__button-favorit nk",t.isFavorit?"product__button-favorit_added":null]),onClick:e[1]||(e[1]=(...s)=>t.toggleFavorit&&t.toggleFavorit(...s))},[m(n,{name:"bookmark"})],2)):d("",!0),t.compare&&!t.disabled?(i(),r("div",{key:4,class:h(["product__button-comp nk",t.isComp?"product__button-comp_added":null]),onClick:e[2]||(e[2]=(...s)=>t.toggleComp&&t.toggleComp(...s))},[m(n,{name:"scale"})],2)):d("",!0),!t.remove&&!t.disabled?(i(),r("div",{key:5,class:h(["product__button-add nk",t.isAdded?"product__button-add_added":null]),onClick:e[3]||(e[3]=(...s)=>t.toggleProduct&&t.toggleProduct(...s))},[m(n,{name:"cart-add"})],2)):d("",!0),!t.disabled&&t.incdec?(i(),_(f,{key:6,class:"product__incdec nk",value:t.count,"onUpdate:value":e[4]||(e[4]=s=>t.count=s),max:50},null,8,["value"])):d("",!0)])])]),t.chars_show&&t.chars?(i(),r("div",it,[rt,o("div",dt,[(i(!0),r(S,null,b(t.chars,s=>(i(),r("div",{class:"product__chars-item",key:s.id},[o("div",lt,l(s.title),1),o("div",at,l(s.value),1)]))),128))])])):d("",!0),t.sets?(i(),r("div",ct,[o("div",nt,[o("div",ut,[ht,o("div",pt,[(i(!0),r(S,null,b(t.sets,s=>(i(),_(w,{key:s.id,class:"form__sets-item plus_md plus_gray",value:s.title,group:"sets",checked:s.checked,"onUpdate:checked":y=>s.checked=y},null,8,["value","checked","onUpdate:checked"]))),128))]),q(o("div",mt,"\u0412\u044B\u0431\u0435\u0440\u0438\u0442\u0435 \u0445\u043E\u0442\u044F \u0431\u044B \u043E\u0434\u043D\u043E \u0441\u0432\u043E\u0439\u0441\u0442\u0432\u043E",512),[[L,t.isSetsError]]),t.isAdded?(i(),_(g,{key:1,class:"product__sets-button",mods:"md, bg-red, shadow-black",href:"/basket",onClick:e[5]||(e[5]=s=>{t.isShowModal=!1,t.isSetsShow=!1})},{default:C(()=>[ft]),_:1})):(i(),_(g,{key:0,class:"product__sets-button",mods:"md, bg-red, shadow-black",onClick:t.toggleProduct},{default:C(()=>[_t]),_:1},8,["onClick"]))])],512)])):d("",!0)],10,j)}var wt=$(T,[["render",vt]]);export{wt as default};
